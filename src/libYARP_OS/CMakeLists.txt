PROJECT(libYARP_OS)

INCLUDE_DIRECTORIES(include)

# We just intend to use cmake to create visual studio project files -
# so ok not to manually include list of source code
AUX_SOURCE_DIRECTORY(src libcode)
ADD_LIBRARY(YARP_OS ${libcode})

LINK_LIBRARIES(YARP_OS ACE)

# cannot just call the executable "yarp" because that is directory name
# and makefiles generated by cmake break
ADD_EXECUTABLE(yarp.exe yarp/yarp.cpp)

AUX_SOURCE_DIRECTORY(harness harnesscode)
ADD_EXECUTABLE(harness.exe ${harnesscode})

# add in our tests
FOREACH(X ${harnesscode})
	  GET_FILENAME_COMPONENT(XN ${X} NAME_WE)
	  ADD_TEST(YARP_OS::${XN} harness.exe regression ${XN})
ENDFOREACH(X $(harnesscode))

