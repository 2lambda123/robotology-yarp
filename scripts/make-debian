#!/bin/sh

# This script makes a debian package
# call from root as ./scripts/make-debian

ORG=$PWD
SRC=$PWD/source-package
BASE=$PWD/debian-package

echo "Make sure you run ./scripts/make-source-package first"

for f in `ls $SRC/*.tar.gz`; do
    echo Working with $f
    rm -rf $BASE
    mkdir -p $BASE
    cd $BASE
    tar xzvf - < $f
    dir=`basename $f .tar.gz`
    if [ -e $dir ]; then
	echo Working in $dir
	cd $dir
	echo Packaging...
#	dpkg-buildpackage -us -uc -d -rfakeroot
	mkdir -p ../result
	pdebuild --buildresult ../result
    fi
done

echo Results in $BASE/result

#cd $BASE
#pbuilder build $BASE/*.dsc


