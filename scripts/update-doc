#!/bin/sh

# run as "./scripts/update-doc"

doxygen conf/Doxyfile.min
doxygen conf/Doxyfile.man
doxygen conf/Doxyfile.pagenum
doxygen conf/Doxyfile.part
doxygen conf/Doxyfile

base=$PWD

for manual in min pagenum; do

    cd $base/doc/$manual/latex

    # we don't include classes so fix up unresolved links
    for f in `ls *.tex`; do
	perl -pe "s/p\....pageref\{\}/see class docs/g" < $f > junk.tex
	mv junk.tex $f
    done
    make pdf
done
